<?php
// ===============================================
// Shortcode: [tgb_search_ui]
// ===============================================
add_shortcode('tgb_search_ui', function () {
    ob_start();
?>
    <div class="tgb_search_wrapper">
        <form action="<?php echo esc_url(home_url('/')); ?>" method="get" class="tgb_search_form">
            <span class="tgb_search_icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 21L15.0001 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </span>
            <input
                type="text"
                name="s"
                class="tgb_search_input"
                placeholder="Nhập tên hoặc danh mục bạn muốn tìm kiếm" />
            <button type="submit" class="tgb_search_button">Tìm kiếm</button>
        </form>

        <div class="tgb_search_suggestions">
            <a href="/danh-muc/bang-van-phong" class="tgb_search_link">bảng văn phòng</a>
            <a href="/danh-muc/nam-cham-cuoi" class="tgb_search_link">nam châm cười</a>
            <a href="/danh-muc/bang-ve-picasso" class="tgb_search_link">bảng vẽ Picasso</a>
            <a href="/danh-muc/bang-ghim-tropical" class="tgb_search_link">bảng ghim Tropical</a>
            <a href="/danh-muc/bang-truong-hoc" class="tgb_search_link">bảng trường học</a>
        </div>
    </div>
<?php
    return ob_get_clean();
});


// ===============================================
// Shortcode: [tgb_header_bottom]
// ===============================================
add_shortcode('tgb_header_bottom', function () {
    ob_start();
?>
    <div class="tgb_header_bottom">
        <div class="list">
            <div class="item" id="main_product_cat">
                <div class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.4 3H4.6C4.03995 3 3.75992 3 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3 3.75992 3 4.03995 3 4.6V8.4C3 8.96005 3 9.24008 3.10899 9.45399C3.20487 9.64215 3.35785 9.79513 3.54601 9.89101C3.75992 10 4.03995 10 4.6 10H8.4C8.96005 10 9.24008 10 9.45399 9.89101C9.64215 9.79513 9.79513 9.64215 9.89101 9.45399C10 9.24008 10 8.96005 10 8.4V4.6C10 4.03995 10 3.75992 9.89101 3.54601C9.79513 3.35785 9.64215 3.20487 9.45399 3.10899C9.24008 3 8.96005 3 8.4 3Z" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M19.4 3H15.6C15.0399 3 14.7599 3 14.546 3.10899C14.3578 3.20487 14.2049 3.35785 14.109 3.54601C14 3.75992 14 4.03995 14 4.6V8.4C14 8.96005 14 9.24008 14.109 9.45399C14.2049 9.64215 14.3578 9.79513 14.546 9.89101C14.7599 10 15.0399 10 15.6 10H19.4C19.9601 10 20.2401 10 20.454 9.89101C20.6422 9.79513 20.7951 9.64215 20.891 9.45399C21 9.24008 21 8.96005 21 8.4V4.6C21 4.03995 21 3.75992 20.891 3.54601C20.7951 3.35785 20.6422 3.20487 20.454 3.10899C20.2401 3 19.9601 3 19.4 3Z" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M19.4 14H15.6C15.0399 14 14.7599 14 14.546 14.109C14.3578 14.2049 14.2049 14.3578 14.109 14.546C14 14.7599 14 15.0399 14 15.6V19.4C14 19.9601 14 20.2401 14.109 20.454C14.2049 20.6422 14.3578 20.7951 14.546 20.891C14.7599 21 15.0399 21 15.6 21H19.4C19.9601 21 20.2401 21 20.454 20.891C20.6422 20.7951 20.7951 20.6422 20.891 20.454C21 20.2401 21 19.9601 21 19.4V15.6C21 15.0399 21 14.7599 20.891 14.546C20.7951 14.3578 20.6422 14.2049 20.454 14.109C20.2401 14 19.9601 14 19.4 14Z" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M8.4 14H4.6C4.03995 14 3.75992 14 3.54601 14.109C3.35785 14.2049 3.20487 14.3578 3.10899 14.546C3 14.7599 3 15.0399 3 15.6V19.4C3 19.9601 3 20.2401 3.10899 20.454C3.20487 20.6422 3.35785 20.7951 3.54601 20.891C3.75992 21 4.03995 21 4.6 21H8.4C8.96005 21 9.24008 21 9.45399 20.891C9.64215 20.7951 9.79513 20.6422 9.89101 20.454C10 20.2401 10 19.9601 10 19.4V15.6C10 15.0399 10 14.7599 9.89101 14.546C9.79513 14.3578 9.64215 14.2049 9.45399 14.109C9.24008 14 8.96005 14 8.4 14Z" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="text">
                    Danh mục
                </div>
                <div class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 9L12 15L18 9" stroke="#818181" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>

                <?php
                $header_settings = get_field('header_settings', 'option') ?? [];
                $menu = $header_settings['menu'] ?? null;

                if ($menu) :
                ?>
                    <div class="main_product_cat_show">
                        <div class="container">
                            <ul class="list_menu">
                                <?php
                                foreach ($menu as $item):
                                    $title = $item['link']['title'] ?? '';
                                    $url = $item['link']['url'] ?? '';
                                    $show_submenu = $item['show_submenu'] ?? '';
                                ?>
                                    <li>
                                        <a href="<?php echo $url; ?>">
                                            <?php echo $title; ?>
                                        </a>

                                        <?php
                                        if ($show_submenu):
                                            $sub_menu = $item['sub_menu'] ?? [];
                                        ?>
                                            <ul class="sub_menu">
                                                <?php
                                                foreach ($sub_menu as $item_2) :
                                                    $title = $item_2['link']['title'] ?? '';
                                                    $url = $item_2['link']['url'] ?? '';
                                                    $products = $item_2['products'] ?? null;
                                                ?>
                                                    <li>
                                                        <a href="<?php echo $url; ?>">
                                                            <?php echo $title; ?>
                                                        </a>

                                                        <?php
                                                        if ($products && is_array($products)):
                                                            $args = array(
                                                                'post_type' => 'product',
                                                                'post__in' => $products,
                                                                'orderby' => 'post__in',
                                                                'posts_per_page' => -1
                                                            );
                                                            $query = new WP_Query($args);
                                                        ?>
                                                            <div class="list_product">
                                                                <div class="title">
                                                                    <?php echo $title; ?>
                                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M9 18L15 12L9 6" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                                    </svg>
                                                                </div>
                                                                <div class="grid_row">
                                                                    <?php
                                                                    while ($query->have_posts()): $query->the_post();
                                                                        global $product;
                                                                        $image_url = get_the_post_thumbnail_url(get_the_ID(), 'medium');
                                                                    ?>
                                                                        <div class="col_custom">
                                                                            <a href="#" class="item">
                                                                                <img src="<?php echo $image_url; ?>" alt="<?php the_title(); ?>">
                                                                                <div class="text">
                                                                                    <?php the_title(); ?>
                                                                                </div>
                                                                            </a>
                                                                        </div>
                                                                    <?php
                                                                    endwhile;
                                                                    wp_reset_postdata();
                                                                    ?>
                                                                </div>
                                                            </div>
                                                        <?php endif; ?>
                                                    </li>
                                                <?php endforeach; ?>
                                            </ul>
                                        <?php endif; ?>
                                    </li>
                                <?php endforeach; ?>
                            </ul>
                        </div>
                    </div>
                <?php endif; ?>
            </div>

            <div class="line"></div>

            <div class="item">
                <div class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.5399 16.54C15.3433 16.5394 15.1511 16.4808 14.9876 16.3716C14.8241 16.2623 14.6964 16.1073 14.6205 15.9259C14.5446 15.7444 14.5239 15.5446 14.561 15.3515C14.5981 15.1584 14.6913 14.9804 14.8289 14.84C15.5789 14.0863 16 13.0663 16 12.003C16 10.9397 15.5789 9.9197 14.8289 9.166C14.6475 8.97643 14.5479 8.72316 14.5516 8.46081C14.5552 8.19847 14.6618 7.94806 14.8484 7.76359C15.0349 7.57912 15.2865 7.47536 15.5489 7.47469C15.8113 7.47402 16.0634 7.57649 16.2509 7.76C17.3712 8.88796 18 10.4132 18 12.003C18 13.5928 17.3712 15.118 16.2509 16.246C16.1577 16.3395 16.0469 16.4137 15.9248 16.4641C15.8028 16.5146 15.672 16.5404 15.5399 16.54ZM9.16292 16.251C9.35146 16.0645 9.45821 15.8108 9.45971 15.5457C9.46121 15.2805 9.35733 15.0256 9.17092 14.837C8.42091 14.0833 7.99987 13.0633 7.99987 12C7.99987 10.9367 8.42091 9.9167 9.17092 9.163C9.26576 9.07018 9.34118 8.95941 9.39278 8.83715C9.44438 8.71489 9.47113 8.58358 9.47147 8.45088C9.47181 8.31817 9.44573 8.18673 9.39476 8.0642C9.34378 7.94168 9.26893 7.83053 9.17457 7.73722C9.0802 7.64392 8.96821 7.57033 8.84511 7.52075C8.72202 7.47116 8.59029 7.44657 8.4576 7.44841C8.32491 7.45026 8.19391 7.47849 8.07224 7.53147C7.95057 7.58445 7.84066 7.66112 7.74892 7.757C6.6286 8.88496 5.99985 10.4102 5.99985 12C5.99985 13.5898 6.6286 15.115 7.74892 16.243C7.93538 16.4315 8.1891 16.5383 8.45426 16.5398C8.71943 16.5413 8.97433 16.4374 9.16292 16.251ZM19.4319 18.671C21.0847 16.8422 21.9998 14.465 21.9998 12C21.9998 9.535 21.0847 7.15777 19.4319 5.329C19.254 5.13234 19.0052 5.01444 18.7403 5.00121C18.4754 4.98799 18.2161 5.08054 18.0194 5.2585C17.8228 5.43646 17.7049 5.68526 17.6916 5.95015C17.6784 6.21505 17.771 6.47434 17.9489 6.671C19.269 8.13202 19.9998 10.031 19.9998 12C19.9998 13.969 19.269 15.868 17.9489 17.329C17.771 17.5257 17.6784 17.785 17.6916 18.0499C17.7049 18.3147 17.8228 18.5635 18.0194 18.7415C18.2161 18.9195 18.4754 19.012 18.7403 18.9988C19.0052 18.9856 19.254 18.8677 19.4319 18.671ZM5.97992 18.741C6.1765 18.5631 6.29441 18.3145 6.30773 18.0497C6.32104 17.7849 6.22867 17.5257 6.05092 17.329C4.73088 15.868 4.00008 13.969 4.00008 12C4.00008 10.031 4.73088 8.13202 6.05092 6.671C6.13904 6.57363 6.20711 6.45985 6.25126 6.33617C6.2954 6.21248 6.31475 6.08131 6.30821 5.95015C6.30166 5.81899 6.26934 5.6904 6.2131 5.57173C6.15686 5.45305 6.07779 5.34662 5.98042 5.2585C5.88304 5.17039 5.76927 5.10231 5.64558 5.05817C5.5219 5.01402 5.39073 4.99467 5.25957 5.00121C4.99467 5.01444 4.74588 5.13234 4.56792 5.329C2.91509 7.15777 2 9.535 2 12C2 14.465 2.91509 16.8422 4.56792 18.671C4.74593 18.8674 4.99465 18.9852 5.25943 18.9983C5.5242 19.0114 5.78335 18.9189 5.97992 18.741ZM11.9999 10.5C11.7032 10.5 11.4132 10.588 11.1666 10.7528C10.9199 10.9176 10.7276 11.1519 10.6141 11.426C10.5006 11.7001 10.4709 12.0017 10.5287 12.2926C10.5866 12.5836 10.7295 12.8509 10.9393 13.0607C11.149 13.2704 11.4163 13.4133 11.7073 13.4712C11.9983 13.5291 12.2999 13.4994 12.5739 13.3858C12.848 13.2723 13.0823 13.08 13.2471 12.8334C13.4119 12.5867 13.4999 12.2967 13.4999 12C13.4999 11.6022 13.3419 11.2206 13.0606 10.9393C12.7793 10.658 12.3977 10.5 11.9999 10.5Z" fill="#CE3727" />
                    </svg>
                </div>
                <div class="text">
                    Livestream
                </div>
            </div>

            <div class="line"></div>

            <div class="item">
                <div class="text">
                    Cam kết
                </div>
                <div class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.53906 1.23024C8.28198 0.922531 9.11741 0.92263 9.86035 1.23024L11.6045 1.9529L11.6035 1.95388C11.8564 2.0583 12.1408 2.05676 12.3936 1.95192L12.3955 1.95095L14.1406 1.2322V1.23122C14.8835 0.923775 15.7182 0.924544 16.4609 1.2322C17.2038 1.53992 17.7947 2.13002 18.1025 2.87282L18.8135 4.59157C18.8171 4.59973 18.8217 4.6077 18.8252 4.61599C18.9296 4.8684 19.1299 5.06938 19.3818 5.17458L21.1279 5.89821C21.8708 6.20598 22.4617 6.79595 22.7695 7.53884C23.0773 8.28178 23.0771 9.11715 22.7695 9.86013L22.0469 11.6043C21.955 11.8261 21.944 12.0713 22.0127 12.2976L22.0469 12.3933L22.0479 12.3963L22.7686 14.1384L22.8691 14.4197C22.9555 14.7044 22.9999 15.001 23 15.2996C23.0001 15.6979 22.921 16.0927 22.7686 16.4607C22.6161 16.8287 22.393 17.1635 22.1113 17.4451C21.9002 17.6562 21.6589 17.8341 21.3965 17.9744L21.127 18.1023L19.3828 18.825C19.1615 18.9165 18.9795 19.0816 18.8672 19.2908L18.8232 19.3826L18.1006 21.1277C17.7928 21.8705 17.2027 22.4605 16.46 22.7683C15.7169 23.0761 14.8818 23.0761 14.1387 22.7683L12.3945 22.0467V22.0457C12.1418 21.9416 11.8579 21.9429 11.6055 22.0476H11.6045L9.85938 22.7693C9.11685 23.0763 8.2824 23.0767 7.54004 22.7693C6.79771 22.4618 6.20744 21.8718 5.89941 21.1297V21.1287L5.17578 19.3826C5.07122 19.1299 4.87066 18.9281 4.61816 18.823V18.824L2.87305 18.1004C2.13048 17.7927 1.54034 17.2032 1.23242 16.4607C0.924603 15.7181 0.924316 14.8823 1.23145 14.1394L1.95313 12.3953C2.05718 12.1426 2.05786 11.8587 1.95313 11.6062L1.95215 11.6052L1.23047 9.85817L1.23145 9.8572C1.07949 9.48988 1.00012 9.09651 1 8.69899C0.999966 8.3008 1.07815 7.90577 1.23047 7.53786C1.38293 7.16986 1.60697 6.83511 1.88867 6.55349C2.1704 6.27187 2.50499 6.04859 2.87305 5.89626L4.61621 5.1736H4.61719C4.86982 5.06911 5.07068 4.86839 5.17578 4.61599L5.89844 2.87185C6.20622 2.12899 6.7962 1.53804 7.53906 1.23024ZM16.207 8.79274C15.8165 8.40237 15.1835 8.40237 14.793 8.79274L11 12.5857L9.70703 11.2927L9.63086 11.2244C9.23813 10.9042 8.65906 10.9268 8.29297 11.2927C7.90248 11.6832 7.90256 12.3163 8.29297 12.7068L10.293 14.7068C10.6835 15.0973 11.3165 15.0973 11.707 14.7068L16.207 10.2068C16.5974 9.81627 16.5975 9.18323 16.207 8.79274Z" fill="#3B82F6" />
                    </svg>
                </div>
                <div class="text">
                    100% hang thật
                </div>
            </div>

            <div class="line"></div>

            <div class="item">
                <div class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.8 3H5.2C4.0799 3 3.51984 3 3.09202 3.21799C2.71569 3.40973 2.40973 3.71569 2.21799 4.09202C2 4.51984 2 5.0799 2 6.2V12.8C2 13.9201 2 14.4802 2.21799 14.908C2.40973 15.2843 2.71569 15.5903 3.09202 15.782C3.51984 16 4.0799 16 5.2 16H6.5H16V8V6.2C16 5.0799 16 4.51984 15.782 4.09202C15.5903 3.71569 15.2843 3.40973 14.908 3.21799C14.4802 3 13.9201 3 12.8 3Z" fill="#3B82F6" />
                        <path d="M16 6.2V16M16 6.2C16 5.0799 16 4.51984 15.782 4.09202C15.5903 3.71569 15.2843 3.40973 14.908 3.21799C14.4802 3 13.9201 3 12.8 3H5.2C4.0799 3 3.51984 3 3.09202 3.21799C2.71569 3.40973 2.40973 3.71569 2.21799 4.09202C2 4.51984 2 5.0799 2 6.2V12.8C2 13.9201 2 14.4802 2.21799 14.908C2.40973 15.2843 2.71569 15.5903 3.09202 15.782C3.51984 16 4.0799 16 5.2 16M16 6.2V8M16 16H5.2M16 16H20.4M16 16H6.5M16 16V8M16 16H17.5M5.2 16H6.5M16 8H18.3373C18.5818 8 18.7041 8 18.8192 8.02763C18.9213 8.05213 19.0188 8.09253 19.1083 8.14736C19.2092 8.2092 19.2957 8.29568 19.4686 8.46863L21.5314 10.5314C21.7043 10.7043 21.7908 10.7908 21.8526 10.8917C21.9075 10.9812 21.9479 11.0787 21.9724 11.1808C22 11.2959 22 11.4182 22 11.6627V14.4C22 14.9601 22 15.2401 21.891 15.454C21.7951 15.6422 21.6422 15.7951 21.454 15.891C21.2401 16 20.9601 16 20.4 16M20.4 16H17.5M6.5 16C5.11929 16 4 17.1193 4 18.5C4 19.8807 5.11929 21 6.5 21C7.88071 21 9 19.8807 9 18.5C9 17.1193 7.88071 16 6.5 16ZM17.5 16C16.1193 16 15 17.1193 15 18.5C15 19.8807 16.1193 21 17.5 21C18.8807 21 20 19.8807 20 18.5C20 17.1193 18.8807 16 17.5 16Z" stroke="#3B82F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="text">
                    Giao hàng nhanh chóng
                </div>
            </div>

            <div class="line"></div>

            <div class="item">
                <div class="icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.2988 1.00781C10.4966 1.01736 10.6859 1.03831 10.8721 1.083L11.0986 1.14648C11.3228 1.21929 11.5379 1.31897 11.7393 1.44238L11.8584 1.5205C12.1324 1.71154 12.3712 1.95715 12.6445 2.23047L20.3135 9.89843L21.1074 10.7002C21.3448 10.9452 21.5538 11.1704 21.7324 11.3809C22.0974 11.8107 22.3932 12.2457 22.5615 12.7637L22.6475 13.0674C22.7944 13.6803 22.7944 14.3197 22.6475 14.9326L22.5615 15.2363C22.3932 15.7543 22.0974 16.1893 21.7324 16.6191C21.5538 16.8296 21.3448 17.0548 21.1074 17.2998L20.3135 18.1016L18.1016 20.3125C17.5193 20.8948 17.0401 21.375 16.6191 21.7324C16.243 22.0517 15.8628 22.3178 15.4268 22.4922L15.2363 22.5615C14.5333 22.79 13.7823 22.8189 13.0674 22.6475L12.7637 22.5615C12.2457 22.3932 11.8107 22.0973 11.3809 21.7324C11.1704 21.5537 10.9452 21.3448 10.7002 21.1074L9.89844 20.3135L2.23047 12.6445C1.95716 12.3712 1.71155 12.1324 1.52051 11.8584L1.44239 11.7393C1.31898 11.5379 1.2193 11.3227 1.14649 11.0986L1.08301 10.8721C1.03832 10.6859 1.01736 10.4966 1.00782 10.2988L1 9.6748V5.20019C1 4.65664 0.998931 4.18835 1.03028 3.80468C1.06259 3.40943 1.1344 3.01599 1.32715 2.63769L1.44239 2.43164C1.73058 1.96166 2.14381 1.57887 2.6377 1.32715L2.78028 1.25976C3.11438 1.11652 3.45882 1.05854 3.80469 1.03027C4.18836 0.998923 4.65665 0.999997 5.2002 0.999997H9.67481L10.2988 1.00781ZM8 6.5C7.17158 6.5 6.50001 7.17157 6.5 8C6.5 8.82842 7.17158 9.49999 8 9.5C8.82843 9.5 9.5 8.82842 9.5 8C9.5 7.17157 8.82843 6.5 8 6.5Z" fill="#3B82F6" />
                    </svg>
                </div>
                <div class="text">
                    Giá siêu rẻ
                </div>
            </div>
        </div>


    <?php
    return ob_get_clean();
});


// Shortcode hiển thị icon giỏ hàng và cập nhật số lượng realtime (jQuery)
function custom_wc_cart_icon_shortcode()
{
    ob_start();
    ?>
        <style>
            .custom-cart-icon {
                position: relative;
                display: inline-block;
            }

            .custom-cart-count {
                position: absolute;
                top: -8px;
                right: -10px;
                background: #e74c3c;
                color: #fff;
                font-size: 12px;
                border-radius: 50%;
                width: 18px;
                height: 18px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            }
        </style>
        <a href="<?php echo esc_url(wc_get_cart_url()); ?>" class="custom-cart-icon">
            <span>
                <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M6 6h15l-1.5 9h-13z" />
                    <circle cx="9" cy="20" r="1" />
                    <circle cx="17" cy="20" r="1" />
                </svg>
            </span>
            <span class="custom-cart-count" id="custom-cart-count"><?php echo WC()->cart->get_cart_contents_count(); ?></span>
        </a>
        <script>
            jQuery(function($) {
                function updateCartCount() {
                    $.get('<?php echo admin_url('admin-ajax.php?action=get_cart_count'); ?>', function(count) {
                        $('#custom-cart-count').text(count);
                    });
                }

                // Khi thêm vào giỏ hàng
                $('body').on('added_to_cart', updateCartCount);

                // Khi cập nhật số lượng ở trang giỏ hàng (AJAX)
                // WooCommerce sẽ trigger event 'updated_cart_totals' sau khi cập nhật xong
                $('body').on('updated_cart_totals', updateCartCount);
            });
        </script>
    <?php
    return ob_get_clean();
}
add_shortcode('tgb_wc_cart_icon', 'custom_wc_cart_icon_shortcode');

// AJAX Handler để trả về số lượng sản phẩm trong giỏ
add_action('wp_ajax_get_cart_count', 'custom_wc_cart_count_ajax');
add_action('wp_ajax_nopriv_get_cart_count', 'custom_wc_cart_count_ajax');
function custom_wc_cart_count_ajax()
{
    echo WC()->cart->get_cart_contents_count();
    wp_die();
}
